# ç½‘ç»œç›¸å…³è½¯ä»¶ä½¿ç”¨

## ä½¿ç”¨â€œå…±äº«æ–‡ä»¶å¤¹â€å®ç°iPhoneä¸PCé—´æ–‡ä»¶å¿«é€Ÿä¼ è¾“

> å‚è€ƒæ–‡çŒ®ï¼š[å¦‚ä½•é€šè¿‡â€œå…±äº«æ–‡ä»¶å¤¹â€å®ç°iPhoneä¸PCé—´æ–‡ä»¶å¿«é€Ÿä¼ è¾“](https://zhuanlan.zhihu.com/p/145540093)

### PCç«¯è®¾ç½®

- è®¾ç½®è¯»å–/å†™å…¥æƒé™

ï¼ˆ1ï¼‰è€ƒè™‘åˆ°ä¿¡æ¯å®‰å…¨é—®é¢˜ï¼Œå»ºè®®å°†å…±äº«ç”¨æˆ·æ•°é‡é™åˆ¶ä¸º1ï¼Œæ ¹æ®ä½¿ç”¨æƒ…å†µè‡ªè¡Œè®¾å®šã€‚

ï¼ˆ2ï¼‰å®Œå…¨æ§åˆ¶æƒé™æ…é€‰ã€‚

![img](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/v2-39f794731fac3c347391bf965fcf9490_1440w.webp)

![img](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/v2-44103f753f47d507913fe5ab3a66a8c2_1440w.webp)

- è·å–IPåœ°å€

ä½¿ç”¨`Win+R`,è¾“å…¥`cmd`,è¾“å…¥`ipconfig`

### æ‰‹æœºç«¯è®¾ç½®

æ‰“å¼€iPhoneç«¯â€œæ–‡ä»¶â€â€”â€”ç‚¹å‡»å³ä¸Šè§’ä¸‰ä¸ªç‚¹â€”â€”é€‰æ‹©â€œè¿æ¥æœåŠ¡å™¨â€â€”â€”è¾“å…¥IPåœ°å€â€”â€”ç‚¹å‡»è¿æ¥â€”â€”é€‰æ‹©æ³¨å†Œç”¨æˆ·â€”â€”è¾“å…¥ç”µè„‘åç§°åŠå¯†ç â€”â€”å®Œæˆã€‚ç„¶åæ‰“å¼€â€œæ–‡ä»¶â€åº”ç”¨ï¼Œå°±å¯ä»¥çœ‹åˆ°å…±äº«æ–‡ä»¶å¤¹äº†ã€‚

![img](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/v2-5d3c86fd875daf87211ce71fa8e1f548_1440w.webp)

## Clashç»™æ‰‹æœºæä¾›ä»£ç†

1. ç¡®å®šç”µè„‘å¯ä»¥é€šè¿‡clashè¿›è¡Œæ­£å¸¸è¿æ¥ï¼Œæˆ–è€…èƒ½é€šè¿‡SSRè¿æ¥

2. æ‰“å¼€Clashçš„`Allow Lan` ï¼Œè¿™ä¸€æ­¥æ˜¯ä¸ºäº†è®©Clashå…è®¸å±€åŸŸç½‘è¿æ¥ï¼ˆåœ¨SSRä¸­ï¼Œåˆ™æ˜¯å…è®¸æ¥è‡ªå±€åŸŸç½‘çš„è¿æ¥ï¼‰  

3. ç”µè„‘è¿›å…¥`cmd`ï¼Œè¾“å…¥`ipconfig`æ‰¾åˆ°ç”µè„‘è‡ªå·±çš„IPv4åœ°å€ï¼Œä¾‹å¦‚`192.168.127.1`

   è¿™é‡Œ192.168æ˜¯Cç±»IPï¼Œæ˜¯å†…ç½‘ä¸­è¿”å›çš„

4. çœ‹çœ‹Clashç•Œé¢çš„Portæ˜¯å¤šå°‘ï¼Œä¸ç”¨ç®¡é‚£ä¸ªSocks Portã€‚ä¾‹å¦‚ï¼ŒPortæ˜¯`1125`

   åœ¨SSRä¸­ï¼Œæ˜¯çœ‹æœ¬åœ°ç«¯å£ï¼Œä¾‹å¦‚ï¼Œæœ¬åœ°ç«¯å£æ˜¯1125

5. æ‰‹æœºæˆ–å…¶å®ƒè®¾å¤‡å…ˆè¿æ¥ä¸Šç”µè„‘win10çš„è‡ªå¸¦çƒ­ç‚¹ï¼Œè¿›å…¥æ‰‹æœº **WiFi** çš„è¯¦ç»†è®¾ç½®ç•Œé¢

6. æŠŠé€‰é¡¹ **ä»£ç†** ä» **æ— ** æ”¹æˆ **æ‰‹åŠ¨** ï¼Œé€‰é¡¹ **ä¸»æœºå** è®¾ç½®ä¸º`192.168.127.1`ï¼Œé€‰é¡¹ **ä»£ç†æœåŠ¡å™¨ç«¯å£** æ”¹ä¸º`1125`ï¼Œç¡®è®¤å³å¯

   <img src="https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/Screenshot%202024-02-02%20at%2000.24.51.jpeg.png" alt="Screenshot 2024-02-02 at 00.24.51.jpeg" style="zoom: 25%;" />

   <img src="https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/Screenshot%202024-02-02%20at%2000.25.19.jpeg.png" alt="Screenshot 2024-02-02 at 00.25.19.jpeg" style="zoom: 25%;" />

## æŠ“åŒ… - Wireshark


## æŠ“åŒ… - Charles


Charlesçš„ä¸»è¦åŠŸèƒ½ï¼š

- æˆªå–Http å’Œ Https ç½‘ç»œå°åŒ…
- æ”¯æŒé‡å‘ç½‘ç»œè¯·æ±‚ï¼Œæ–¹ä¾¿åç«¯è°ƒè¯•
- æ”¯æŒä¿®æ”¹ç½‘ç»œè¯·æ±‚å‚æ•°
- æ”¯æŒç½‘ç»œè¯·æ±‚çš„æˆªè·å¹¶åŠ¨æ€ä¿®æ”¹
- æ”¯æŒæ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œ


### é…ç½®
[Download a Free Trial of Charles â€¢ Charles Web Debugging Proxy](https://www.charlesproxy.com/download/)

### IOSæ‰‹æœºæŠ“åŒ…

[charleså¯¹iOSæ‰‹æœºçš„httpsè¿›è¡ŒæŠ“åŒ…ï¼ˆå›¾æ–‡æ•™ç¨‹ï¼‰\_charlesæ€ä¹ˆæŠ“iosæ‰‹æœºåŒ…-CSDNåšå®¢](https://blog.csdn.net/weixin_43837268/article/details/121938674)

## æŠ“åŒ… - Burpsuite

Burp Suite æ˜¯ä¸€ä¸ªé›†æˆåŒ–çš„æ¸—é€æµ‹è¯•å·¥å…·ï¼Œå®ƒåŒ…å«äº†å¤šä¸ªç”¨äºæ”»å‡»å’Œåˆ†æ Web åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

### ä¸»è¦åŠŸèƒ½

1. **Proxyï¼ˆä»£ç†ï¼‰**
   - æ‹¦æˆªå¹¶ä¿®æ”¹å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è¯·æ±‚å’Œå“åº”
   - æ”¯æŒ HTTP/HTTPS æµé‡åˆ†æ
   - å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ã€è½¬å‘æˆ–ä¸¢å¼ƒè¯·æ±‚

2. **Scannerï¼ˆæ‰«æå™¨ï¼‰**
   - è‡ªåŠ¨æ‰«æ Web åº”ç”¨ç¨‹åºæ¼æ´
   - æ£€æµ‹å¸¸è§å®‰å…¨é—®é¢˜å¦‚ SQL æ³¨å…¥ã€XSS ç­‰
   - ç”Ÿæˆè¯¦ç»†çš„æ¼æ´æŠ¥å‘Š

3. **Repeaterï¼ˆä¸­ç»§å™¨ï¼‰**
   - æ‰‹åŠ¨ä¿®æ”¹å’Œé‡å‘ HTTP è¯·æ±‚
   - åˆ†ææœåŠ¡å™¨å“åº”
   - æµ‹è¯•ä¸åŒå‚æ•°å¯¹å“åº”çš„å½±å“

4. **Intruderï¼ˆå…¥ä¾µï¼‰**
   - è‡ªåŠ¨åŒ–æ”»å‡»æµ‹è¯•
   - æ”¯æŒå¤šç§æ”»å‡»æ¨¡å¼
   - å¯ç”¨äºæš´åŠ›ç ´è§£ã€æ¨¡ç³Šæµ‹è¯•ç­‰

### ä½¿ç”¨æ­¥éª¤

1. é…ç½®æµè§ˆå™¨ä»£ç†ä¸º Burp Suiteï¼ˆé»˜è®¤ 127.0.0.1:8080ï¼‰
2. å®‰è£… Burp çš„ CA è¯ä¹¦ä»¥æ‹¦æˆª HTTPS æµé‡
3. å¼€å¯æ‹¦æˆªåŠŸèƒ½ï¼Œè§‚å¯Ÿå’Œåˆ†æ HTTP/HTTPS è¯·æ±‚
4. æ ¹æ®éœ€è¦ä½¿ç”¨ä¸åŒæ¨¡å—è¿›è¡Œæµ‹è¯•


## æŠ“åŒ…å®æˆ˜ - å¿…è‡³å±…é¢„çº¦



[å¾®ä¿¡å¼€æ”¾æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/security/gateway/test/snifferpacket.html)

## æŠ“åŒ…å®æˆ˜ - zdtyä½“æµ‹é¢„çº¦

ä¸€ä¸ªå¹³å¹³æ— å¥‡çš„å‘¨æ—¥æ™šä¸Šï¼Œåœ¨ä¸Šè¯¾çš„PhilFanæ”¶åˆ°fufuåœ¨ç¾¤é‡Œå‘çš„æ¶ˆæ¯

~~"zdtyçœŸåƒåœ¾ï¼Œéƒ½æ˜¯æ˜æ–‡ä¼ "~~

é¡ºå¸¦ä¼ äº†ä¸€å¼ é¢„çº¦å¥½çš„ä½“æµ‹ç…§ç‰‡ï¼Œä¸è¿‡è¿™ä¸ªæ—¶é—´æ®µä¸æ˜¯è¿˜æ²¡æœ‰å¼€æ”¾å’©ï¼Ÿï¼Ÿ

äºæ˜¯PhilFanå†³å®šç¨å¾®æŠ“æŠ“çœ‹ï¼Œ~~çœ‹çœ‹æœ‰å¤šåƒåœ¾~~ï¼Œå¤ä¹ ä»¥ä¸‹åˆšå­¦åˆ°çš„HTTPæŠ“åŒ…æŠ€èƒ½ã€‚~~ï¼ˆä¸–ç•Œæ˜¯ä¸€ä¸ªå·¨å¤§çš„è‰å°ç­å­~~


å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç°åœ¨å·²ç»æ²¡æœ‰å¿…è¦ä½¿ç”¨ä»£ç è¿›è¡Œé¢„çº¦äº†ï¼Œå› ä¸ºappé¢„çº¦ä¹Ÿä¸éº»çƒ¦ï¼ˆå°±æ˜¯ç©ä¸€ä¸‹hhh



!!! note "**ä»¥ä¸‹è¡Œä¸ºå‡ä»¥å­¦ä¹ è®¡ç½‘çŸ¥è¯†ä¸ºç›®çš„ï¼Œæ¨¡ä»¿å¸¦æ¥çš„ä»»ä½•é£é™©ç”±ä½¿ç”¨è€…è‡ªå·±æ‰¿æ‹…ï¼Œè¯·æ³¨æ„ä¿æŠ¤å¥½è‡ªå·±çš„éšç§ä¿¡æ¯**"



### ç¬¬ä¸€æ­¥â€”â€”å¦‚ä½•æŠ“åŒ…æ‰‹æœºAPP

- ç¬¬ä¸€ç§æ˜¯ç”¨ç”µè„‘ç»™æ‰‹æœºæä¾›çƒ­ç‚¹ï¼Œç›¸å½“äºç”µè„‘å½“ä½œäº†æ‰‹æœºçš„æµé‡æ¥æºï¼Œç›´æ¥åœ¨ç”µè„‘ä¸Šä½¿ç”¨æŠ“åŒ…å·¥å…·ï¼ˆå¦‚`wireshark`ç­‰ï¼‰è¿›è¡Œåˆ†æå³å¯ã€‚

  ![image-20240318085112013](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/image-20240318085112013.png)

- ç¬¬äºŒç§æˆ‘ä¹Ÿæ²¡æœ‰è¯•è¿‡ï¼Œç›´æ¥ä½¿ç”¨æ‰‹æœºç«¯çš„æŠ“åŒ…APPè¿›è¡Œåˆ†æã€‚



### ç¬¬äºŒæ­¥â€”â€”æ‰¾åˆ°å¯¹åº”çš„æŠ¥æ–‡

æ‰“å¼€wiresharkï¼Œé€‰æ‹©HTTPè¿›è¡Œç­›é€‰

ä¸ºäº†ä¸æŠ“åˆ°å…¶ä»–æ— å…³ä¿¡æ¯ï¼Œè¿˜æ˜¯**å°½é‡å…³ä¸€ä¸‹å…¶ä»–ç½‘ç«™å’ŒAPP**

æ‰“å¼€zdtyï¼Œä½“æµ‹é¢„çº¦ï¼Œçœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹ä¿¡æ¯è¯´æ˜å¯ä»¥æŠ“åˆ°

![image-20240318082144366](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/image-20240318082144366.png)

ä»¥4æœˆ12æ—¥ä½“æµ‹ä¸ºä¾‹ï¼Œç‚¹å¼€ä½“æµ‹é¢„çº¦ï¼Œæˆ‘ä»¬å‘ç°æœ‰ä¸€ä¸ªæŠ¥æ–‡

![image-20240318082347175](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/image-20240318082347175.png)

> **ç”±è¯¾ä¸ŠçŸ¥è¯†æˆ‘ä»¬çŸ¥é“**ï¼š
>
> HTTPæŠ¥æ–‡ç”±è¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€ç©ºç™½è¡Œ(`\r\n`)ã€è¯·æ±‚ä½“
>
> è¯·æ±‚è¡Œç”±ä¸‰éƒ¨åˆ†æ„æˆï¼šç¬¬ä¸€éƒ¨åˆ†è¯´æ˜è¯·æ±‚ç±»å‹ä¸º get æ–¹æ³•è¯·æ±‚ï¼Œç¬¬äºŒéƒ¨åˆ†ï¼ˆç”¨/åˆ†å¼€ï¼‰æ˜¯èµ„æº URLï¼Œç¬¬ä¸‰éƒ¨åˆ†è¯´æ˜ä½¿ç”¨çš„æ˜¯ HTTP1.1 ç‰ˆæœ¬ã€‚

å¾ˆå¥‡æ€ªçš„æ˜¯ï¼Œè¿™é‡Œæˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªGETè¯·æ±‚çš„URLï¼Œç›´æ¥å°†tokenå’Œæ—¥æœŸä»€ä¹ˆçš„è¿›è¡Œæ˜æ–‡ä¼ é€’äº†ã€‚

ï¼ˆæœ´ç´ è®¤çŸ¥ä¸‹ï¼Œè¿™æ˜¯ä¸æ˜¯æ„å‘³ç€åªè¦å—…æ¢åˆ°ä½ çš„æµ™å¤§ä½“è‰ºé¢„çº¦æŠ¥æ–‡ï¼Œå°±å¯ä»¥è·å¾—ä½ çš„tokenï¼Œ~~è¿›è€Œå¯ä»¥å–æ¶ˆä½ çš„é¢„çº¦~~ï¼‰

![image-20240318082934711](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/image-20240318082934711.png)

åˆ†æä¸Šå›¾æˆ‘ä»¬å¯ä»¥å‘ç°è¯·æ±‚å¤´çš„ä¸€äº›ä¿¡æ¯ï¼Œé‡å¤åˆšæ‰çš„æ­¥éª¤å¤šæ¬¡å¯ä»¥æ‰¾åˆ°ä¸€å®šè§„å¾‹

- id:3325ï¼ˆåº”è¯¥æ˜¯ä½“æµ‹æ—¶é—´çš„æ’åºï¼Œä¸”ç›¸é‚»æ—¶é—´æ•°å­—ä¹Ÿæ˜¯ç›¸é‚»çš„ï¼‰
- testDateï¼šä½“æµ‹çš„æ—¥æœŸ
- timeSoltï¼šä½“æµ‹çš„æ—¶é—´æ®µ
- jTokenï¼šä¸å¤ªæ‡‚å…·ä½“æ˜¯ä»€ä¹ˆä½œç”¨ï¼Œæ¨æµ‹æ˜¯è¿›è¡Œç”¨æˆ·çš„è¯†åˆ«
- __ï¼šä¸æ¸…æ¥šå…·ä½“ä½œç”¨ï¼Œæ¨æµ‹ä¸ºæ—¶é—´æˆ³ã€‚

å†è¯•ç€ç‚¹ä¸€æ¬¡é¢„çº¦ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªæ–°çš„æŠ¥æ–‡

![image-20240318083929415](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/image-20240318083929415.png)

åˆ†æè¿™ä¸ªè¯·æ±‚çš„URLï¼Œå‘ç°å¤šäº†å‡ ä¸ªå‚æ•°

- testPointNameï¼šç´«é‡‘æ¸¯ç”°å¾„åœºä½“æµ‹ä¸­å¿ƒï¼ˆåº”è¯¥æ˜¯ä½“æµ‹åœ°ç‚¹ï¼Œ~~ä¹Ÿå¯ä»¥æ”¹æˆå¿«ä¹æ˜Ÿçƒ~~
- telï¼šä½ çš„ç”µè¯
- periodIdï¼šå­¦å¹´ï¼Œè¿™æ¬¡åº”è¯¥æ˜¯2024

å…¶å®åˆ°æ‰¾åˆ°ä½ çš„tokenï¼ŒçŸ¥é“ä½ è¦é¢„çº¦çš„æ—¶é—´æ®µå’Œå¹´ä»½ï¼Œå°±å¯ä»¥æŠ“äº†ã€‚

??? bug "æ²¡æœ‰ææ‡‚çš„åœ°æ–¹"
	æµ™å¤§ä½“è‰ºæ˜¯ç”¨ä»€ä¹ˆæ¡†æ¶<br>
	token,cookie,session,cacheçš„åŒºåˆ«
### ç¬¬ä¸‰æ­¥â€”â€”ä½¿ç”¨ä»£ç è¿›è¡ŒæŠ¥æ–‡æ¨¡æ‹Ÿ

è¿™ä¸€æ­¥å…¶å®å°±æ²¡æœ‰ä»€ä¹ˆéš¾åº¦äº†

ç›¸å½“äºä½ åªéœ€è¦çŸ¥é“è¿™ä¸ªURLï¼Œå¯¹è¿™ä¸ªURLå‘GETè¯·æ±‚å°±å¯ä»¥äº†

~~è¯¢é—®gptå°±è¡Œäº†~~

- ä½¿ç”¨curlå‘½ä»¤
- ä½¿ç”¨PowerShell 
- ä½¿ç”¨Pythonçš„`request`åº“å³å¯

æ³¨æ„è¦å°†åˆšæ‰çš„ä¿¡æ¯æŠ“ä¸‹æ¥å¡«å¥½

```python
# ç¤ºä¾‹
import requests

BASE_URL = "http://tyys.zju.edu.cn"
JSESSIONID = ""
JTOKEN = ""
TEL = ""

def schedule_appointment(schedule_id, test_date, time_slot_id, test_point_name="å¿«ä¹æ˜Ÿçƒ", test_option_id="", period_id="2024"):

    url = f"{BASE_URL}/pft/app/schedule/student/event/submit"
    params = {
        "scheduleId": schedule_id,
        "testPointName": test_point_name,
        "testDate": test_date,
        "timeSoltId": time_slot_id,
        "testOptionId": test_option_id,
        "tel": TEL,
        "periodId": period_id,
        "jToken": JTOKEN,
    }
    cookies = {
        "JSESSIONID": JSESSIONID
    }
    response = requests.get(url, params=params, cookies=cookies)
    print(response.status_code)
    print(response.text)
    
# Example usage
schedule_appointment("3322", "2024-04-12", "13:30-14:00")
```

å¯ä»¥å‘ç°ï¼Œæˆ‘çš„ä½“æµ‹åœ°ç‚¹å˜æˆäº†å¿«ä¹æ˜Ÿçƒï¼ˆğŸ˜‚

![111](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/d519771d06acb8610067b01d27799f0.jpg)

åŒç†ï¼Œå¯ä»¥æŠ“åˆ°å–æ¶ˆé¢„çº¦çš„URL

å…¶ä¸­`scheduledId`å‚æ•°éœ€è¦è·å–"æˆ‘çš„é¢„çº¦"åˆ—è¡¨ï¼Œå†æŠ“å–å“åº”æŠ¥æ–‡è·å¾—

```python
def cancel_appointment(scheduled_id):
    url = f"{BASE_URL}/pft/app/schedule/student/my/undo"
    params = {
        "scheduledId": scheduled_id,
        "jToken": JTOKEN
    }
    response = requests.get(url, params=params)
    print(response.status_code)
```




