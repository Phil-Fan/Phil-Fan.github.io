# 计算机控制系统

## 基本信息
- 学分：3.5pt
- 成绩组成:<br>平时成绩占20%——出勤、课堂测试/互动/交流、作业<br>
   实践成绩占35%——综合实践大作业，小组情况、个人完成情况各占50%计算<br>
   期末考试占45%——半开卷，1张A4纸，手写，复印无效<br>

![](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/20250220082031246.png)

<iframe src="http://www.cse.zju.edu.cn/aec/2012/0308/c73095a2676372/page.htm" width="100%" height="600px" frameborder="0"></iframe>



### A4

[云高天遥 - A4原型](https://www.cc98.org/topic/5645283)

[Healor - A4](https://www.cc98.org/topic/5925911)

[Rainbow0 - A4](https://www.cc98.org/topic/5658322)

### 历年卷
[计算机控制系统设计与实践 2023-2024春夏 回忆卷 - CC98论坛](https://www.cc98.org/topic/5925877)

[计算机控制系统设计与实践（计控）22-23春夏回忆卷 - CC98论坛](https://www.cc98.org/topic/5644108)

[计算机控制系统设计与实践（计控）21-22春夏回忆卷 - CC98论坛](https://www.cc98.org/topic/5353159)

阀门定位器，与气动…一起形成负反馈
计算机控制系统的实时性要求
氢腐蚀概念
 二线制或者四线制
分辨率概念相关
酸碱腐蚀性
给传递函数，推导离散PID

如何评价安全的传感系统（大概这个意思）


### 实验课

硬件、软件、编程、综合实践


## 第一章

!!! note "常见英文术语对照"
    - DDZ 电动单元组合元件
    - PLC
    - D/A，A/D
    - IO
    - DDC 直接数字量控制
    - DCS 集散控制
    - FCS 现场总线控制系统
    - CSMA/CD

### 自动控制（反馈控制）的基本逻辑

1. **控制的基本形式**：开环、闭环；  
   **基本要求**：稳、准、快、优；
   
   闭环控制的准确性和稳定性都比开环高，只不过前者成本高一些

2. **四个（类）基本环节**：  
   - 被控对象、检测仪表、控制器、执行器
   - **对象**：工业过程、运动对象、社会科学问题  
   - **目标**：过程性＋结果性
   - 在没有人直接参与的情况下，感知信息，系统分析，综合决策，自动干预，达成稳定、有序的预期目标

3. **反馈的两种形式**：正反馈和负反馈


![](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/20250306110534039.png)

ai: 
ao: 


### 计算机控制系统组成

1. **计算机控制系统的工作过程**：  
   周期性，采样 + 分析决策 + 输出执行

2. **计算机控制系统的基本组成**：  
   软件（系统软件、支持软件、应用软件） + 硬件（可靠性、插卡式IO、集成式IO）

### 计算机控制的简要发展过程

1. **模拟调节器**：模拟电路调节ji

2. **计算机控制系统的几个典型发展阶段**：  
   - 50年代：DDC直接数字量控制，：用一台计算机取代一组调节器，构成闭环控制回路
   - 60年代：集中型:用一台计算机控制多个回路；控制集中、危险集中、信息集中
   - 70年代：DCS集散控制系统：控制分散、危险分散、信息集中；
     - 生产管理层——>操作监控层——>网络冗余(引入冗余，可靠性更高)——>现场控制层
     - 远程节点的引入的好处：好处：提高运行效率 降低维护成本 提高数据传输速；问题：网络安全问题 通讯延迟问题；启示：结合实际 整体评估 加强检测维护
   - 90年代：FCS现场总线控制系统：全数字通信、全分散控制


![](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/20250227084020236.png)


!!! note "计算机控制系统中的“计算机”与普通计算机相比会有哪些方面的“相同”和“不同”？"

      （主要体现在可靠性、响应速度、网络通信等方面的要求）

      **1. 可靠性方面的要求**  
      - 对于计算机控制系统和普通计算机来说，可靠性都是非常重要的指标。  
      - 在生产、交通等重要场景中，计算机控制系统必须保证高可靠性，以确保工业过程或交通运输的安全性。  
      - 普通计算机则更侧重于数据和信息的安全，例如数据备份、防止病毒攻击等。

      **2. 响应速度方面的要求**  
      - 计算机控制系统需要快速响应物理变化和环境变化，具有极高的实时性和响应速度。  
      - 例如，在自动驾驶汽车中，计算机控制系统需要在几毫秒内响应传感器采集的数据并给出刹车或转向指令。  
      - 普通计算机的响应速度对于大部分日常使用场景而言，通常没有那么高的要求。

      **3. 网络通信方面的要求**  
      - 计算机控制系统和普通计算机在网络通信方面的要求也存在差异。  
      - 计算机控制系统需要保证高可靠、低时延的网络通信，以确保控制信号及时、准确地传输。  
      - 普通计算机则更注重网络通信的稳定性和速度，以便于进行互联网连接、文件传输等日常操作。

自动控制系统的金字塔
自上而下：决策支持系统(DSS)、生产执行系统(MES)、实时优化(RTO)、先进控制(APC)、基础控制

### 网络通信技术简介

1. **若干基本概念**:模拟/数字；并行/串行；单工/半双工/全双工；

2. **串行总线**：RS-232、-422、-485
   - RS-232。全双工，单端输入，单线共地，19.6Kbps，15m，加 Modem延长，抗干扰差- RS-422。全双工，差动，双线，抑制共模干扰，10Mbps，1200m(不加中断且与传输速率有关)
   - RS-485。现场总线“首选”。半双工，差动，双线，抑制共模干扰，同一网段 max32节点，可特制到
   128以上

3. **现场总线**

现场总线与一般计算机通信网络的技术特征差异（；前为一般，后为现场总线）
通信速度：快；可靠的快，最大响应时间确定
安全性：一般要求；本质安全，电磁兼容
网络拓扑：网络型(多路径)；总线型(单一路径，本安)   

4. **工业以太网**


!!! question "工控系统为什么以前不用Ethernet通信？"
      - CSMA/CD→先听后说/边听边说→大负荷时存在碰撞可能→存在"原理上的不确定性"
      - 通信速率↑，网络负荷↓，碰撞概率↓
      - 交换技术发展 → 进一步减轻碰撞问题
      - e网负荷＜10%时，基本无碰撞；负荷＜25%时，e网通信响应时间明显短于令牌网
      - "不确定性"不再是e网用于工控底层网络的主要障碍（工业以太网）


- 短帧信息多、长帧信息少
- 周期性信息多（测量、控制信息），非周期性信息少（操作指令、组态信息；报警等突发性事件信息）；信息流向方向性明显
- 节点数少、网络负荷较平稳
- 简化的OSI模型（7层→3、4层）
- 工业以太网碰撞概率是很低的



!!! question "低频电压信号，则接收端输入阻抗越大越好；对低频电流信号，则接收端阻抗越小越好"
      正确

      ---

      ```
         电压源 V_s
               |
            ┌─┴─┐
            │ R_s│ ← 源内阻（小）
            └─┬─┘
               |
               ├───────► 接收端
               |
            ┌─┴─┐
            │ R_in│ ← 接收端输入阻抗（我们要讨论的）
            └────┘
      ```


      传到接收端的电压 $V_{\text{in}}$ 为：

      $$
      V_{\text{in}} = V_s \cdot \frac{R_{\text{in}}}{R_s + R_{\text{in}}}
      $$

      * 若 $R_{\text{in}} \to \infty$，则 $V_{\text{in}} \to V_s$：信号几乎无衰减，完美还原。
      * 若 $R_{\text{in}} \ll R_s$，则 $V_{\text{in}}$ 很小，几乎损失殆尽。

      ✅ **结论**：**电压信号→接收端阻抗应尽量大**。

      ---

      ```
         电流源 I_s
               |
            ┌─┴─┐
            │ R_s│ ← 源内阻（大）
            └─┬─┘
               |
               ├───────► 接收端
               |
            ┌─┴─┐
            │ R_in│ ← 接收端输入阻抗
            └────┘
      ```

      设总串联阻抗 $R_{\text{total}} = R_s + R_{\text{in}}$

      电流源输出 $I_s$ 不变，通过接收端的电压为：

      $$
      V_{\text{in}} = I_s \cdot R_{\text{in}}
      $$

      但重点是：**你不希望 $R_{\text{in}}$ 大，否则电压升高，容易引入误差或限制电流源输出能力**。

      超过电流源的最大输出电压会导致电流输出不稳定



## 检测仪表原理与选型

| 类型       | 信号类型                    | 特点说明                         |
| -------- | ----------------------- | ---------------------------- |
| **数字传输** | 数字信号（离散的0和1）在物理信道上传输    | 电平明确（如高电平=1，低电平=0），对噪声有更强鲁棒性 |
| **模拟传输** | 模拟信号（连续变化的电压/频率等）在信道上传输 | 容易受到噪声干扰，信息以波形特征（幅度/频率/相位）编码 |


| 对比项     | 基带传输           | 频带传输        |
| ------- | -------------- | ----------- |
| 数字/模拟传输 | 数字信号的数字传输      | 数字信号的模拟传输   |
| 是否调制    | 否（直接传输数字信号）    | 是（需调制成模拟波形） |
| 典型应用    | 有线局域网、USB、串口通信 | 无线通信、电视、广播  |

### 仪表分类


过程控制仪表与装置分类
按单元结构分：变送器、执行器、控制器、显示器、安全栅
按信号类型分：模拟式、数字式
按能源形式分：电动(24VDC 220VAC)、气动、液压、机械式
基地式控制仪表、单元组合仪表
单元组合仪表
8种单元：变送、调节、执行、显示、辅助、给定、转换、运算

![](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/20250306083336979.png)
DDZ：电动单元组合元件
QDZ：气动单元组合元件

电流输入仪表、电压输入仪表及其输入阻抗


![](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/20250306111119766.png)


信号制：气动、电动、数字仪表

气动：20kPa-100kPa
电动：4-20mADC->250-750Ω 负载，0-10mADC->0-1000Ω/0-3000Ω
数字仪表：RS-232、RS-485、HART、各种现场总线标准
电流输入型仪表输入阻抗小(几十-几百 Ω)，电压输入型的大(∞)
仪表单元之间的传输信号一般为电流信号(适合远距离传输，抗干扰能力强)
一个电流发送，多个电流接收，串联，注意负载不要超过。
一个电流发送，多个电压接收。

### 通信方式
无线通信协议：蓝牙、wifi、Zigbee

通信技术：NB-IoT、LoRa



### 基本工作原理

模拟仪表框架

数字仪表框架


HART（Highway Addressable Remote Transducer）协议是一种用于现场设备（如传感器和执行器）的通信协议。它允许设备通过一根双绞线进行通信，既传输模拟信号（如4-20mA电流信号），又传输数字信号。

### 防爆
注意防爆等级


#### 仪表防爆
防爆标志+形式[类别]+级别 +温度组别

何为防爆仪表？
哪些场合需防爆？
危险因素有哪些？
防爆措施有哪些？


防爆措施：限制温度(外壳)(低功耗设计)、限制能量(火花，限能设计)、用高强度壳体罩牢

压缩空气的气动仪表就无发热问题

防爆类别：I类：煤矿 II类：除 I的气体环境 III类：除 I的粉尘环境

气体：隔爆型 d-隔离存在的点火源,开壳即无效；

本质安全型 i-限制点火源的能量；粉尘：本质安全型 iD iaD/Da、ibD/Db
1. 经过设计，使仪表在正常或规定的故障状态下，产生的电火花和热效应均不会引起规定的易爆性气体
混合物爆炸。
2. 低工作电压/低工作电流
ia 等级 在正常和≤2 个故障时均安全
ib 等级 在正常和 1个故障时安全
3. 可现场开壳维修，但维修设备也应本质安全
![](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/20250306083300792.png)

气体等级与最小引爆火花能量：I甲烷 0.280mJ IIA丙烷 0.180mJ IIB乙烯 0.060mJ IIC氢气 0.019mJ
T1-6:max 450/300/200/135/100/85
防爆标志+形式[类别]+级别+温度组别
Ex+i本安 d隔爆[a本安 a类 b本安 b类]+IIA、IIB、IIC+T1-6
危险性存在：0区 1000小时以上/年，1区 10-1000小时，2 区 0.1-10小时



#### 系统防爆
①现 场：使用合适的防爆仪表
②信号传输：现场仪表 中间应安装安全栅(限能)或隔离栅(限能+隔离)
③现场布线：布线简单、直接；穿线管直径足够大等等
原因分析：线缆之间、线缆与穿线管管壁之间存在分布电容、分布电感，分布电容、分布电感具有储能作用，存在释放能量可能


整个系统：现场使用合适的防爆仪表；现场和控制室设备之间安装安全栅(限能)或隔离栅(限能+隔离)；现场
布线线缆之前形成分布电容，电感，与管壁形成分布电容，具有储能作用，穿线管直径要足够大

### 仪表防护
![](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/20250306090733047.png)





### 信号连接方式 —— 二线制和四线制
!!! note "DDZ：电动单元组合"

- DDZ-II型：分立元件电源220VAC信号0～10mA 
- DDZ-III型：集成电路电源24VDC信号4～20mA、1～5VDC

二线制(DDZ-III)比四线制(DDZ-II)更安全防爆
四线制可以抵消引线电阻

需要注意电阻信号的接线方式和变送器信号制的区别


数字仪表的信号标准:RS-232、RS-485、HART、各种现场总线标准（工业以太网）

### 变送器

变送器是将各种工艺参数转换成统一的标准电信号


气动、电动；差压、压力、流量、温度、液位等；模拟、数字。与
传感器可以独立，也可以统一；好的：单值对应、线性、稳定、快速

非线性补偿：反馈相同的；输入相反的

数字仪表如何实现线性化变化、补偿等功能：多项式拟合、指数函数变换、传感器误差补偿、数字滤波

（一）压力（差压）变送器：问题式回顾
（二）温度传感及其变送：问题式回顾
（三）数字变送器
（四）开关量检测（不仅仅检测连续信号）


### 仪表选型
（一）检测仪表选型的若干要点：量程（合适的工作点）、准确度（够用就好）
（二）仪表材料选择及处理：酸碱腐蚀、氢腐蚀；特殊介质；高温、真空等特殊要求


## 执行器
执行器的作用？
接收控制信号，将能量转换为物理机械运动
### 正反作用

被控变量、控制变量 、执行器的正反作用、控制器的正反作用

✔ **正作用（气开）**：失控时**关阀**，危险才小
✔ **反作用（气关）**：失控时**开阀**，危险才小

| **场景**     | **控制介质** | **失控时应处于状态** | **安全性判断**             | **推荐执行器作用** | **说明**             |
| ------------ | ------------ | -------------------- | -------------------------- | ------------------ | -------------------- |
| 锅炉进水阀   | 水           | **打开（继续进水）** | 避免干烧 → **应保持打开**  | **反作用（气关）** | 失控时继续进水更安全 |
| 易燃料进料阀 | 液体/气体    | **关闭（停止进料）** | 避免泄漏/爆炸 → **应关闭** | **正作用（气开）** | 失控时进料停止更安全 |
| 反应器冷却阀 | 水           | **打开（继续冷却）** | 防止过热 → **应保持打开**  | **反作用（气关）** | 失控时冷却继续更安全 |
| 加热炉燃料阀 | 气体         | **关闭（停止供气）** | 防爆 → **应关闭**          | **正作用（气开）** | 失控时应停止供气     |
| 安全排气阀   | 气体         | **打开（泄压）**     | 避免超压 → **应打开**      | **反作用（气关）** | 失控时能泄压更安全   |


### 调节阀


法兰的介绍
<iframe src="//player.bilibili.com/player.html?isOutside=true&aid=434842283&bvid=BV1z3411S7GS&cid=951065001&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="600px"></iframe>

由三部分组成：
- 侧边有定位器，可以检测阀杆位置，并输出4-20mA电流信号
- 顶部是气动执行机构（隔膜膜片和弹簧组成）带动阀杆和阀芯运动，达到控制阀门开度的目的
- 下方是调节机构：阀体、阀座、阀芯、阀杆或转轴，直接与介质接触，由阀芯的位置或者转角，改变调节阀的流通截面积，从而改变介质的流量

气阀打开，空气增多，压力增大，阀门关闭
![](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/20250608112835.png)

<iframe src="//player.bilibili.com/player.html?isOutside=true&aid=933910874&bvid=BV1VT4y1d7Y2&cid=435152367&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="600px"></iframe>




!!! note "调节阀的动态图像"
      <iframe src="//player.bilibili.com/player.html?isOutside=true&aid=426048381&bvid=BV1K3411K75w&cid=585036087&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="600px"></iframe>

      <iframe src="//player.bilibili.com/player.html?isOutside=true&aid=250631535&bvid=BV1sv41137kQ&cid=413242027&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="600px"></iframe>

      下面视频演示了刀闸阀，三片式球阀，楔式闸阀，两偏心蝶阀，旋启式止回阀

      <iframe src="//player.bilibili.com/player.html?isOutside=true&aid=413437773&bvid=BV1vV411r7XS&cid=199989737&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="600px"></iframe>

!!! question "调节阀最小可调流量即为调节阀的泄漏量"
      ❌

      | 概念               | 定义                                  | 说明                             |
      | ---------------- | ----------------------------------- | ------------------------------ |
      | **泄漏量（Leakage）** | 在**阀门完全关闭**（关断状态）时，仍有少量介质从阀芯与阀座之间泄出 | 是一个**静态特性**，表示阀门的密封性           |
      | **最小可调流量**       | 在阀门**调节状态**下，系统中能稳定控制的**最小有效流量变化**  | 是一个**动态调节性能**指标，取决于执行器灵敏度、阀特性等 |

      标称最大流量：100 m³/h

      泄漏量：0.05 m³/h（完全关闭状态时仍有微小泄漏）

      最小可调流量：0.5 m³/h（调节状态下能精确控制的最小流量）

      调节阀在保证控制稳定性前提下，最大可控制流量与最小可稳定控制流量之比。

      可调比 = $\frac{\text{最大可调流量}}{\text{最小可调流量}}$

      📌 举例：
      一个调节阀最大流量是 100 m³/h，最小能稳定调节的是 1 m³/h

      可调比 = $\frac{100}{1} = 100:1$

      如果最小只能调到 10 m³/h：

      可调比 = $\frac{100}{10} = 10:1$

### 开关阀


### 电力系统元件介绍

接触器 Contactor

就是大功率设备的“电动开关”，控制电机等重载设备开关动作，是工业自动化系统的核心元件之一。

> 你在工厂控制室按下“启动”按钮，控制电路给接触器线圈送电 → 接触器“啪”一声吸合 → 电动机获得三相电开始转动。
> 如果你按“停止”，接触器断电 → 触点分开 → 电动机断电停止。


继电器Relay

与接触器的主要区别在于：
- 对电压、电流变化做出灵敏的反应，
- 触点数量很多但容量较小（可以有很多组开关如3组常开+常闭，但每组触点只能承受较小电流如1A~10A）
- 主要用来切换小电流电路（如接触器的线圈电流）或用作信号的中间转换。

!!! note "接触器和继电器的区别"
   继电器是“小电流的控制器”，接触器是“大电流的电闸”。
   继电器常用来控制接触器线圈，接触器则控制真正的电力设备。


自动空气开关（Air Switch）

又称自动空气断路器，简称空开，是低压配电网络和电力系统中非常重要的一种电器，它集控制和多种保护功能于一身。除了能完成接触和分断电路外，能对电路或电气设备发生的短路、严重过载及欠电压等进行保护，也可用于不频繁启动电动机。

### 电机开关控制



### 电机变频控制


## 控制器


- 检测信号输入
- 输入/产生给定
- 正反作用切换
- 控制算法
- 信号显示 
- 控制信号输出 
- 手动输出 
- 手自动切换 
- 无扰动切换


| 作用类型    | 定义                       |
| ------- | ------------------------ |
| **正作用** | 过程变量（PV）上升 → 控制器输出（OP）上升 |
| **反作用** | 过程变量（PV）上升 → 控制器输出（OP）下降 |

🔸 情况1：加热阀是正向控制
阀门越开 → 温度越高
温度低于设定值：控制器应该增加输出 → 阀开大 → 升温
所以这个时候要选：正作用

🔸 情况2：冷却阀控制（如通过冷水降温）
阀门越开 → 温度越低
温度高于设定值：控制器应该增加输出 → 开大冷却阀 → 降温
所以：反作用


### PID
PID

PID离散化

### 单元式控制器

模拟调节器：模电

数字控制器

### PLC概述


![](https://philfan-pic.oss-cn-beijing.aliyuncs.com/img/202506191005216.png)

 | 图  | 电容C作用          | 功能说明                 |
| -- | -------------- | -------------------- |
| 左图 | RC滤波、去抖动、防止误触发 | 机械开关/继电器信号稳定处理       |
| 右图 | 整流滤波、信号保持      | 交流输入信号转换为稳定逻辑电平，驱动光耦 |



## Chap 6 控制系统工程设计



- 满足要求
- 系统可靠
- 自主可控
- 先进有效
- 性价比高




### 图表
**管道仪表流程图（P&ID）**

包含设备、配管、仪表、特殊设计及安装要求

**仪表、设备位号举例**

- TRC-131：温度记录与控制仪表
- FRC：流量记录调节
- PI：压力指示
- LSH：液位高报警
- TIT：温度指示变送
- FV：流量执行元件

**图形代号说明**

- 就地安装仪表：中间没有一横
- 集中仪表盘面安装仪表：有电信号线



| 干扰类型 | 防护措施           |
| -------- | ------------------ |
| 电磁     | 电磁屏蔽           |
| 机械     | 防振、避振         |
| 热       | 热屏蔽、恒温、补偿 |
| 光       | 光屏蔽             |
| 化学     | 密封、清洁         |
| 湿度     | 浸漆、树脂封灌     |

### 抗干扰 - 屏蔽技术

**外壳屏蔽**：  
电场反射为主，良导体，与厚度关系不大，需接地。  
磁场吸收为主，高导磁率材料，与厚度关系大，理论上可不接地（接地更好）。

**电缆屏蔽**：  
屏蔽层必须接地。  
电场：单端接地。  
磁场：双端接地以减小感应面积。  
注意地电位差（混合接地可解决，抑制高低频电场）。

### 抗干扰 - 接地技术

- 保护地：防雷接地、保护接地
- 工作地：信号基准地、干扰抑制接地
- 二者不得在“柜内”混用

**接地方式**：

- 单独接地
- 等电位系统
- 混合接地系统

**内部连接**：

- 并联，“分类汇总”
- 汇总点离接入点越近越好
- 接地电阻越小越好，≤4Ω
- 严禁接入开关或熔断器

### 抗干扰 - 防雷

- 1类：突波吸收，如压敏电阻
- 2类：击穿释放，气体放电管
- 有电源类、信号类、通信总线类电涌保护器

### 抗干扰 - 静电防护

静电电压：人体感受 >2000V 有感，>3000V 有光  
静电感应对高输入阻抗电路影响显著

**防护措施**：

- 表面平滑，避免电荷积累
- 接地疏导
- 加离子中和
- 环境保持一定湿度